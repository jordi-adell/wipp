dist: trusty
language: cpp
compiler:
 - gcc

addons:
 apt:
  sources:
   - george-edison55-precise-backports # cmake 3.2.3
   - ubuntu-toolchain-r-test
  packages:
   - g++-4.8
   - cmake
   - cmake-data
   - libfftw3-dev   
   - libgtest-dev
   - libboost1.55-all-dev

env: COMPILER=g++-4.8

before_install:
 - sudo wget https://github.com/google/googletest/archive/release-1.7.0.tar.gz
 - sudo tar xf release-1.7.0.tar.gz
 - cd googletest-release-1.7.0
 - sudo cmake -DBUILD_SHARED_LIBS=ON .
 - sudo make
 - sudo cp -a include/gtest /usr/include
 - sudo cp -a libgtest_main.so libgtest.so /usr/lib/
 - cd "${TRAVIS_BUILD_DIR}"

branches:
 only:
  - master

before_script:
 - mkdir build
 - cd build
 - cmake -DCMAKE_CXX_COMPILER=g++-4.8 -DCMAKE_C_COMPILER=gcc-4.8 -Dtest=yes ../

script:
 - make tests
 - make test

